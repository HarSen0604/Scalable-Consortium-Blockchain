<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8"> <!-- Character encoding for the document -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Responsive design -->
    <title>Blockchain Interface</title> <!-- Page title -->

    <!-- Link to the external CSS file for styling the form -->
    <link rel="stylesheet" href="index.css">

    <!-- Importing Web3 library to interact with the blockchain -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.5.0/web3.min.js"></script>

    <!-- Importing Vanta.js and Three.js libraries for animated background -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r121/three.min.js"></script>
    <script src="https://unpkg.com/vanta/dist/vanta.waves.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/node-rsa/1.0.0/node-rsa.min.js"></script>

    <!-- Link to the app.js file where the blockchain interaction happens -->
    <script src="app.js"></script>

    <!-- Vanta background container -->
    <div id="vantaBackground"></div>
</head>

<body>
    <!-- Main content that stays above the Vanta background -->
    <div id="content" class="container">
        <!-- Action selector dropdown to choose between different actions: Add Doctor, Add Patient, or Book Appointment -->
        <div class="action-selector-container">
            <h2>Select Action</h2>
            <select id="actionSelector" class="action-selector">
                <option value="addDoctor">Add Doctor</option>
                <option value="addPatient">Add Patient</option>
                <option value="bookAppointment">Book Appointment</option>
            </select>
        </div>

        <!-- Section for adding a new doctor -->
        <div id="addDoctorSection" class="forms">
            <h2>Get Doctor Info</h2>
            <form id="getDoctorForm">
                <label>Doctor ID: <input type="number" id="doctorIdFetch" required></label>
                <button type="submit">Get Doctor</button>
            </form>
            <div id="doctorInfo"></div>

            <h2>Add Doctor</h2>
            <form id="addDoctorForm">
                <label>ID: <input type="number" id="doctorId" required></label>
                <label>Name: <input type="text" id="doctorName" required></label>
                <label>Age: <input type="number" id="doctorAge" required></label>
                <label>Department: <input type="text" id="doctorDepartment" required></label>
                <button type="submit">Add Doctor</button>
            </form>
        </div>
        
        <!-- Section for adding a new patient (initially hidden) -->
        <div id="addPatientSection" style="display: none;">
            <h2>Add Patient</h2>
            <form id="addPatientForm">
                <label>ID: <input type="number" id="patientId" required></label>
                <label>Name: <input type="text" id="patientName" required></label>
                <label>Age: <input type="number" id="patientAge" required></label>
                <label>Medical History: <input type="text" id="patientMedicalHistory" required></label>
                <button type="submit">Add Patient</button>
            </form>

            <h2>Get Patient Info</h2>
            <form id="getPatientForm">
                <label>Patient ID: <input type="number" id="patientIdFetch" required></label>
                <button type="submit">Get Patient</button>
            </form>
            <div id="patientInfo"></div>
        </div>

        <!-- Section for booking an appointment (initially hidden) -->
        <div id="bookAppointmentSection" style="display: none;">
            <h2>Book Appointment</h2>
            <form id="bookAppointmentForm">
                <label>Appointment ID: <input type="number" id="appointmentId" required></label>
                <label>Patient ID: <input type="number" id="appointmentPatientId" required></label>
                <label>Doctor ID: <input type="number" id="appointmentDoctorId" required></label>
                <label>Room ID: <input type="number" id="appointmentRoomId" required></label>
                <label>Date: <input type="date" id="appointmentDate" required></label>
                <button type="submit">Book Appointment</button>
            </form>

            <h2>Get Appointment Info</h2>
            <form id="getAppointmentForm">
                <label>Appointment ID: <input type="number" id="appointmentIdFetch" required></label>
                <button type="submit">Get Appointment</button>
            </form>
            <div id="appointmentInfo"></div>

            <h2>Execute Server Code</h2>
            <button id="getExecutionResultButton">Execute Server Code</button>
            <div id="executionResult"></div>
        </div>
    </div>

    <!-- Dialog for access requests (initially hidden) -->
    <div id="accessDialog" style="display: none;">
        <p>You do not have access to perform this action. Please request access from the admin.</p>
        <button id="requestAccessButton">Request Access</button>
    </div>

    <!-- Initialize Vanta.js background -->
    <script>
        VANTA.WAVES({
            el: "#vantaBackground", // Target element for the Vanta effect
            mouseControls: true, // Enable mouse controls
            touchControls: true, // Enable touch controls for mobile devices
            gyroControls: false, // Disable gyroscope controls
            minHeight: 200.00, // Minimum height of the effect
            minWidth: 200.00, // Minimum width of the effect
            scale: 1.00, // Scale of the effect
            scaleMobile: 1.00, // Scale for mobile devices
            color: 0x1f1f1f,   /* Dark background color */
            shininess: 50.00, // Shininess of the waves
            waveHeight: 20.00, // Height of the waves
            waveSpeed: 0.70, // Speed of the wave animation
            zoom: 0.85 // Zoom level of the background
        });
    </script>
</body>

</html>
